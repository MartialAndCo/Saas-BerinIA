2025-04-27 10:31:51,341 - brain_test - INFO - ‚úÖ Syst√®me de logging am√©lior√© charg√©
2025-04-27 10:31:51,364 - utils.config - INFO - Chargement des variables d'environnement depuis config/.env
2025-04-27 10:31:51,368 - utils.config - WARNING - OPENAI_API_KEY manquante, les fonctionnalit√©s LLM seront en mode simulation
2025-04-27 10:31:51,368 - utils.config - WARNING - JWT_SECRET manquante, l'authentification API sera d√©sactiv√©e
2025-04-27 10:31:51,368 - utils.config - WARNING - Param√®tres manquants: OPENAI_API_KEY, JWT_SECRET. Copiez config/.env.example vers config/.env et configurez ces param√®tres.
2025-04-27 10:31:52,337 - berinia-db-connector - INFO - ‚úÖ Table 'leads' trouv√©e dans la base de donn√©es Berinia
2025-04-27 10:31:52,337 - berinia-db-connector - INFO - ‚úÖ Connexion √† la DB Berinia r√©ussie avec URL: postgresql://berinia_user:***@localhost/berinia
2025-04-27 10:31:52,338 - root - INFO - ‚úÖ Module d'int√©gration Berinia disponible.
2025-04-27 10:31:52,340 - brain_test - INFO - ‚úÖ Agents import√©s avec succ√®s
2025-04-27 10:31:52,344 - berinia-db-connector - INFO - ‚úÖ Connexion √† la DB Berinia r√©ussie
2025-04-27 10:31:52,345 - brain_test - INFO - ‚úÖ Int√©gration Berinia test√©e - Disponible: True
2025-04-27 10:31:52,350 - brain_test - INFO - üöÄ D√©marrage du DecisionBrainAgent...
2025-04-27 10:31:52,351 - DecisionBrainAgent - INFO - üöÄ DecisionBrainAgent d√©marr√©
2025-04-27 10:31:52,352 - brain_test - INFO - üß† DecisionBrainAgent initialis√©
2025-04-27 10:31:52,352 - brain_test - INFO - ‚è≥ Ex√©cution de l'agent cerveau en cours...
2025-04-27 10:31:52,352 - DecisionBrainAgent - INFO - üì• Donn√©es d'entr√©e: {"operation": "evaluate_global_strategy", "context": {"test_mode": false, "simulate_data": true, "verbose": true, "integration_tests": true, "berinia_available": true}}
2025-04-27 10:31:52,352 - DecisionBrainAgent - INFO - ‚öôÔ∏è Ex√©cution du DecisionBrainAgent d√©marr√©e
2025-04-27 10:31:52,353 - DecisionBrainAgent - INFO - [BRAIN] üß† ========== D√âCISION STRAT√âGIQUE ==========
2025-04-27 10:31:52,353 - DecisionBrainAgent - INFO - [BRAIN] üîÑ D√©but du processus de raisonnement strat√©gique global
2025-04-27 10:31:52,354 - DecisionBrainAgent - INFO - [BRAIN] üìã Op√©ration demand√©e: evaluate_global_strategy
2025-04-27 10:31:52,354 - DecisionBrainAgent - INFO - [BRAIN] üîç R√©cup√©ration des donn√©es de campagnes pass√©es et actives...
2025-04-27 10:31:52,354 - DecisionBrainAgent - INFO - [BRAIN] üìä Campagnes pass√©es: 0 | Campagnes actives: 0
2025-04-27 10:31:52,355 - DecisionBrainAgent - INFO - [BRAIN] üßÆ Interrogation de la m√©moire vectorielle pour niches inexploit√©es...
2025-04-27 10:31:52,355 - DecisionBrainAgent - INFO - [BRAIN] üí° D√©couverte de 0 opportunit√©s inexploit√©es
2025-04-27 10:31:52,356 - DecisionBrainAgent - INFO - [BRAIN] ‚öôÔ∏è Construction du prompt de d√©cision strat√©gique...
2025-04-27 10:31:52,356 - DecisionBrainAgent - INFO - [BRAIN] üí≠ R√©flexion strat√©gique en cours (GPT-4.1)...
2025-04-27 10:31:52,357 - llm - INFO - Simulation de requ√™te GPT-4.1 avec temp√©rature 0.7
2025-04-27 10:31:52,357 - DecisionBrainAgent - INFO - [BRAIN] ‚è±Ô∏è D√©cision prise en 0.00 secondes
2025-04-27 10:31:52,357 - DecisionBrainAgent - INFO - [BRAIN] üÜï D√âCISION: D√©marrer une nouvelle campagne
2025-04-27 10:31:52,358 - DecisionBrainAgent - INFO - [BRAIN] üîç Processus d√©cisionnel:
2025-04-27 10:31:52,358 - DecisionBrainAgent - INFO - [BRAIN] üß©   1. Analyse des campagnes pass√©es : aucune donn√©e disponible.
2025-04-27 10:31:52,358 - DecisionBrainAgent - INFO - [BRAIN] üß©   2. Analyse des campagnes actives : aucune donn√©e disponible.
2025-04-27 10:31:52,358 - DecisionBrainAgent - INFO - [BRAIN] üß©   3. Analyse des niches inexploit√©es : aucune donn√©e disponible.
2025-04-27 10:31:52,359 - DecisionBrainAgent - INFO - [BRAIN] üß©   4. Consid√©ration du contexte d'initialisation : syst√®me en phase de d√©marrage initial.
2025-04-27 10:31:52,359 - DecisionBrainAgent - INFO - [BRAIN] üß©   5. D√©cision bas√©e sur l'absence de donn√©es historiques et la n√©cessit√© d'initier l'apprentissage du syst√®me.
2025-04-27 10:31:52,359 - DecisionBrainAgent - INFO - [BRAIN] üë• Agents √† impliquer dans l'ex√©cution:
2025-04-27 10:31:52,359 - DecisionBrainAgent - INFO - [BRAIN] ü§ñ   ‚Üí StrategyAgent
2025-04-27 10:31:52,359 - DecisionBrainAgent - INFO - [BRAIN] ü§ñ   ‚Üí PlanningAgent
2025-04-27 10:31:52,360 - DecisionBrainAgent - INFO - [BRAIN] ü§ñ   ‚Üí CampaignStarterAgent
2025-04-27 10:31:52,360 - DecisionBrainAgent - INFO - [BRAIN] ü§ñ   ‚Üí ScraperAgent
2025-04-27 10:31:52,360 - DecisionBrainAgent - INFO - [BRAIN] ü§ñ   ‚Üí CleanerAgent
2025-04-27 10:31:52,360 - DecisionBrainAgent - INFO - [BRAIN] ü§ñ   ‚Üí ClassifierAgent
2025-04-27 10:31:52,360 - DecisionBrainAgent - INFO - [BRAIN] üöÄ D√©marrage des agents subordonn√©s...
2025-04-27 10:31:52,360 - DecisionBrainAgent - INFO - [BRAIN] üìû Appel de l'agent StrategyAgent...
2025-04-27 10:31:52,366 - llm - INFO - Simulation de requ√™te GPT-4.1 avec temp√©rature 0.7
2025-04-27 10:31:52,367 - agents - INFO - Agent StrategyAgent: execute - UNKNOWN
2025-04-27 10:31:52,367 - DecisionBrainAgent - INFO - [BRAIN] ‚úì Agent StrategyAgent ex√©cut√© avec succ√®s
2025-04-27 10:31:52,368 - DecisionBrainAgent - INFO - [BRAIN] üìû Appel de l'agent PlanningAgent...
2025-04-27 10:31:52,369 - llm - INFO - Simulation de requ√™te GPT-4.1 avec temp√©rature 0.7
2025-04-27 10:31:52,369 - DecisionBrainAgent - ERROR - [BRAIN] ‚ùå Erreur lors de l'ex√©cution de l'agent PlanningAgent: 'str' object has no attribute 'get'
2025-04-27 10:31:52,369 - DecisionBrainAgent - INFO - [BRAIN] ‚ö†Ô∏è Agent PlanningAgent a signal√© une erreur: 'str' object has no attribute 'get'
2025-04-27 10:31:52,369 - DecisionBrainAgent - INFO - [BRAIN] ‚è≠Ô∏è Agent CampaignStarterAgent ignor√©: cha√Æne d'ex√©cution interrompue par des d√©pendances √©chou√©es: ['PlanningAgent']
2025-04-27 10:31:52,370 - DecisionBrainAgent - INFO - [BRAIN] ‚è≠Ô∏è Agent ScraperAgent ignor√©: cha√Æne d'ex√©cution interrompue par des d√©pendances √©chou√©es: ['CampaignStarterAgent']
2025-04-27 10:31:52,370 - DecisionBrainAgent - INFO - [BRAIN] ‚è≠Ô∏è Agent CleanerAgent ignor√©: cha√Æne d'ex√©cution interrompue par des d√©pendances √©chou√©es: ['ScraperAgent']
2025-04-27 10:31:52,370 - DecisionBrainAgent - INFO - [BRAIN] ‚è≠Ô∏è Agent ClassifierAgent ignor√©: cha√Æne d'ex√©cution interrompue par des d√©pendances √©chou√©es: ['CleanerAgent']
2025-04-27 10:31:52,370 - DecisionBrainAgent - INFO - [BRAIN] ‚úÖ Ex√©cution termin√©e en 0.02 secondes
2025-04-27 10:31:52,371 - DecisionBrainAgent - INFO - [BRAIN] üß† ==========================================
2025-04-27 10:31:52,371 - agents - INFO - Agent DecisionBrainAgent: evaluate_global_strategy - UNKNOWN
2025-04-27 10:31:52,371 - brain_test - INFO - ‚úÖ Agent ex√©cut√© avec succ√®s en 0.02 secondes
2025-04-27 10:31:52,372 - DecisionBrainAgent - INFO - üì§ R√©sultat: {"decision": {"decision_process": ["Analyse des campagnes pass√©es : aucune donn√©e disponible.", "Analyse des campagnes actives : aucune donn√©e disponible.", "Analyse des niches inexploit√©es : aucune donn√©e disponible.", "Consid√©ration du contexte d'initialisation : syst√®me en phase de d√©marrage initial.", "D√©cision bas√©e sur l'absence de donn√©es historiques et la n√©cessit√© d'initier l'apprentissage du syst√®me."], "action": "nouvelle", "campagne_cible": null, "commentaire": "Aucune campagne existante d√©tect√©e. Le syst√®me doit initialiser une premi√®re campagne pour commencer √† collecter des donn√©es et √©tablir des r√©f√©rences de performance. Cette phase initiale est cruciale pour l'apprentissage du syst√®me.", "priorit√©": "haute", "agents_√†_impliquer": ["StrategyAgent", "PlanningAgent", "CampaignStarterAgent", "ScraperAgent", "CleanerAgent", "ClassifierAgent"]}, "thinking_steps": ["R√©flexion strat√©gique en cours (GPT-4.1)..."], "execution_time": 0.017596960067749023, "timestamp": "2025-04-27T10:31:52.371233", "brain_log_file": "logs/DecisionBrainAgent_20250427103151.log", "agent_results": {"StrategyAgent": {"niche": "Avocats sp√©cialis√©s en droit des affaires", "justification": "Les cabinets d'avocats sp√©cialis√©s en droit des affaires ont souvent des clients √† forte valeur qui n√©cessitent une r√©activit√© imm√©diate. Leur absence du bureau (audiences, rendez-vous) et leurs horaires charg√©s entra√Ænent une perte de prospects potentiels. Un standard t√©l√©phonique IA et un chatbot permettraient de capturer ces opportunit√©s manqu√©es et de r√©aliser un premier filtrage.", "potentiel_conversion": "√©lev√©", "suggestions_message": ["Combien de clients potentiels estimez-vous perdre chaque mois √† cause d'appels manqu√©s ou sans r√©ponse?", "Votre expertise en droit des affaires est pr√©cieuse. Pendant vos audiences, qui r√©pond √† vos nouveaux clients potentiels?", "Notre solution de standard t√©l√©phonique IA a permis √† des cabinets similaires d'augmenter leur acquisition de clients de 30%"], "approach_used": "initial", "prompt_used": "\nTu es un agent strat√©gique chez BerinIA, une entreprise sp√©cialis√©e dans l'installation de solutions d'IA pour les entreprises.\n\nüéØ Ce que nous proposons :\n- Installation de **chatbots intelligents** sur les sites web pour r√©pondre aux questions, informer, guider, convertir.\n- Mise en place de **standards t√©l√©phoniques IA** pour ne plus perdre d'appels : l'IA r√©pond, qualifie, redirige ou prend un RDV.\n\nüë• Nos cibles :\n- Nous travaillons exclusivement en **B2B**.\n- Nous visons des **TPE/PME ou ind√©pendants**, notamment ceux qui perdent des clients √† cause :\n  - d'un manque de disponibilit√© au t√©l√©phone\n  - de l'absence de r√©ponses sur leur site\n  - d'un besoin d'automatiser une partie du service client\n\nüö´ Ne propose jamais :\n- De niches grand public (supermarch√©s, centres commerciaux, associations, grandes cha√Ænes de distribution)\n- De niches d√©j√† test√©es r√©cemment ou sans pertinence pour notre service\n- De niches r√©cemment rejet√©es par l'√©quipe de planification\n\n‚úÖ Ce que tu dois faire :\n- Proposer **une niche d'activit√© professionnelle sp√©cifique** (ex. : \"salons de massage\", \"plombiers\", \"cabinets dentaires\")\n- Cette niche doit avoir un **besoin √©vident** de pr√©sence t√©l√©phonique ou de chatbot\n- Elle doit √™tre **logique avec notre offre**, et ne pas d√©j√† avoir √©t√© test√©e\n\nTrouve une nouvelle niche originale √† explorer.\n\nüßæ Voici les niches d√©j√† test√©es :\n{\n  \"total_campaigns\": 0,\n  \"active_campaigns\": 0,\n  \"completed_campaigns\": 0,\n  \"top_performing_niches\": [],\n  \"underperforming_niches\": [],\n  \"average_conversion_rate\": 0,\n  \"lead_count_total\": 0,\n  \"most_recent_campaign\": null\n}\n\nüìã Voici les niches r√©cemment rejet√©es par l'√©quipe de planification :\nAucune niche r√©cemment rejet√©e.\n\nüîÅ Ne propose rien de redondant ou trop proche s'il n'y a pas de vraie diff√©rence dans le besoin.\n\nDonne-moi :\n- Une seule niche, pr√©cise\n- Une justification strat√©gique et logique\n- Une estimation du potentiel de conversion (faible, moyen, √©lev√©)\n- Des suggestions de message adapt√©s √† cette niche pour le premier contact\n\nFormat attendu (strict) :\n- niche: <nom>\n- justification: <texte>\n- potentiel_conversion: <faible|moyen|√©lev√©>\n- suggestions_message: <liste>\n", "timestamp": "2025-04-27T10:31:52.367356"}, "PlanningAgent": {"error": "'str' object has no attribute 'get'"}, "CampaignStarterAgent": {"error": "D√©pendances non satisfaites", "status": "SKIPPED"}, "ScraperAgent": {"error": "D√©pendances non satisfaites", "status": "SKIPPED"}, "CleanerAgent": {"error": "D√©pendances non satisfaites", "status": "SKIPPED"}, "ClassifierAgent": {"error": "D√©pendances non satisfaites", "status": "SKIPPED"}}}
2025-04-27 10:31:52,372 - DecisionBrainAgent - INFO - ‚è±Ô∏è Temps d'ex√©cution: 20.61 ms
2025-04-27 10:31:52,372 - DecisionBrainAgent - INFO - ‚úÖ DecisionBrainAgent termin√© avec succ√®s en 21.47 ms
2025-04-27 10:31:52,373 - brain_test - INFO - üîÑ Ex√©cution des tests d'int√©gration...
2025-04-27 10:31:52,373 - brain_test - INFO - üß™ Test du CleanerAgent...
2025-04-27 10:31:52,373 - CleanerAgent - INFO - üöÄ CleanerAgent d√©marr√©
2025-04-27 10:31:52,373 - CleanerAgent - INFO - üì• Donn√©es d'entr√©e: {"raw_leads": [{"id": "test_lead_1", "company_name": "Entreprise Test 1", "email": "contact@test1.com", "phone": "+33123456789"}, {"id": "test_lead_2", "company_name": "Entreprise Test 2", "email": "", "phone": "+33987654321"}, {"id": "test_lead_3", "company_name": "Entreprise Test 3", "email": "info@test3.fr", "phone": "+33555555555"}], "campaign_id": "test_campaign_123"}
2025-04-27 10:31:52,374 - agents - INFO - Agent CleanerAgent: execute - FAILED
2025-04-27 10:31:52,374 - CleanerAgent - INFO - üì§ R√©sultat: {"error": "Aucune donn√©e √† nettoyer", "clean_data": [], "status": "FAILED", "message": "Un ensemble de leads valide est requis pour le nettoyage. L'agent StrategyAgent ou ScraperAgent doit fournir des donn√©es."}
2025-04-27 10:31:52,374 - CleanerAgent - INFO - ‚è±Ô∏è Temps d'ex√©cution: 0.90 ms
2025-04-27 10:31:52,374 - CleanerAgent - INFO - ‚úÖ CleanerAgent termin√© avec succ√®s en 1.10 ms
2025-04-27 10:31:52,374 - brain_test - INFO - ‚úÖ CleanerAgent a trait√© 0 leads
2025-04-27 10:31:52,374 - brain_test - INFO - üß™ Test du LeadClassifierAgent...
2025-04-27 10:31:52,375 - LeadClassifierAgent - INFO - üöÄ LeadClassifierAgent d√©marr√©
2025-04-27 10:31:52,375 - LeadClassifierAgent - INFO - üì• Donn√©es d'entr√©e: {"cleaned_leads": [], "campaign_id": "test_campaign_123"}
2025-04-27 10:31:52,375 - agents - INFO - Agent LeadClassifierAgent: execute - COMPLETED
2025-04-27 10:31:52,375 - LeadClassifierAgent - INFO - üì§ R√©sultat: {"operation": "classify", "campaign_id": "test_campaign_123", "timestamp": "2025-04-27T10:31:52.375294", "status": "COMPLETED", "classified_leads": [], "metrics": {"total_leads": 0, "avg_global_score": 0, "valid_contacts": 0}, "message": "Aucun lead fourni pour la classification. Pr√™t pour la prochaine s√©rie de leads."}
2025-04-27 10:31:52,375 - LeadClassifierAgent - INFO - ‚è±Ô∏è Temps d'ex√©cution: 0.80 ms
2025-04-27 10:31:52,376 - LeadClassifierAgent - INFO - ‚úÖ LeadClassifierAgent termin√© avec succ√®s en 1.00 ms
2025-04-27 10:31:52,376 - brain_test - INFO - ‚úÖ LeadClassifierAgent a classifi√© 0 leads
2025-04-27 10:31:52,376 - brain_test - INFO - üß™ Test du CRMExporterAgent (Berinia)...
2025-04-27 10:31:52,376 - CRMExporterAgent - INFO - üöÄ CRMExporterAgent d√©marr√©
2025-04-27 10:31:52,376 - CRMExporterAgent - INFO - üöÄ CRMExporterAgent d√©marr√©
2025-04-27 10:31:52,376 - CRMExporterAgent - INFO - üì• Donn√©es d'entr√©e: {"classified_leads": [], "campaign_id": "test_campaign_123", "pending_leads_count": 5, "daily_limit": 20, "exported_today": 10}
2025-04-27 10:31:52,376 - CRMExporterAgent - INFO - üì• Donn√©es d'entr√©e: {"classified_leads": [], "campaign_id": "test_campaign_123", "pending_leads_count": 5, "daily_limit": 20, "exported_today": 10}
2025-04-27 10:31:52,376 - CRMExporterAgent - INFO - ‚öôÔ∏è D√©cision d'exportation des leads vers le CRM...
2025-04-27 10:31:52,377 - CRMExporterAgent - ERROR - ‚ùå ERREUR: Aucun lead √† exporter
2025-04-27 10:31:52,378 - CRMExporterAgent - ERROR - Contexte de l'erreur: {"input_data": "empty"}
2025-04-27 10:31:52,378 - agents - INFO - Agent CRMExporterAgent: execute - UNKNOWN
2025-04-27 10:31:52,378 - CRMExporterAgent - INFO - üì§ R√©sultat: {"error": "Aucun lead √† exporter", "export_decision": {"leads_to_export_now": [], "leads_to_delay": []}}
2025-04-27 10:31:52,378 - CRMExporterAgent - INFO - ‚è±Ô∏è Temps d'ex√©cution: 1.92 ms
2025-04-27 10:31:52,378 - CRMExporterAgent - WARNING - ‚ö†Ô∏è CRMExporterAgent termin√© avec statut 'no_leads' en 2.36 ms
2025-04-27 10:31:52,379 - CRMExporterAgent - INFO - üì§ R√©sultat: {"error": "Aucun lead √† exporter", "export_decision": {"leads_to_export_now": [], "leads_to_delay": []}}
2025-04-27 10:31:52,379 - CRMExporterAgent - INFO - ‚è±Ô∏è Temps d'ex√©cution: 2.78 ms
2025-04-27 10:31:52,379 - CRMExporterAgent - WARNING - ‚ö†Ô∏è CRMExporterAgent termin√© avec statut 'failure' en 3.24 ms
2025-04-27 10:31:52,379 - brain_test - INFO - ‚úÖ CRMExporterAgent a export√© 0 leads (statut: None)
2025-04-27 10:31:52,382 - brain_test - INFO - üíæ R√©sultat sauvegard√© dans logs/brain_result_20250427103152.json
2025-04-27 10:31:52,383 - brain_test - INFO - üìä Rapport d'ex√©cution syst√®me: logs/execution/system_execution_20250427103152.json
2025-04-27 10:31:52,383 - brain_test - INFO - üìä D√©tails de la d√©cision :
2025-04-27 10:31:52,383 - brain_test - INFO -   Action : nouvelle
2025-04-27 10:31:52,383 - brain_test - INFO -   Campagne cible : None
2025-04-27 10:31:52,383 - brain_test - INFO -   Priorit√© : haute
2025-04-27 10:31:52,383 - brain_test - INFO -   Agents √† impliquer : StrategyAgent, PlanningAgent, CampaignStarterAgent, ScraperAgent, CleanerAgent, ClassifierAgent
2025-04-27 10:31:52,383 - brain_test - INFO - üß© √âtapes de r√©flexion :
2025-04-27 10:31:52,383 - brain_test - INFO -   1. R√©flexion strat√©gique en cours (GPT-4.1)...
